<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tienda A-cloK</title>
  <style>
    :root{--bg:#f5f5f5;--card:#fff;--accent:#ff9900;--muted:#666}
    body{font-family:Inter, system-ui, -apple-system, Arial; background:var(--bg); margin:0; color:#111}
    header{background:#232f3e;color:white;padding:18px 24px;display:flex;align-items:center;gap:16px}
    .brand{font-weight:700;font-size:20px}
    .container{max-width:1100px;margin:28px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}

    /* Card */
    .card{background:var(--card);border-radius:10px;padding:12px;box-shadow:0 4px 12px rgba(0,0,0,.06);display:flex;flex-direction:column;align-items:stretch}
    .imgwrap{height:220px;display:flex;align-items:center;justify-content:center;overflow:hidden;border-radius:8px;background:#fff}
    .imgwrap img{max-height:100%;max-width:100%;object-fit:contain}
    .title{font-size:15px;margin:10px 4px;color:#111;min-height:40px}
    .price{font-size:22px;font-weight:800;color:var(--accent);margin:6px 4px}
    .meta{font-size:13px;color:var(--muted);margin:0 4px 10px}
    .actions{margin-top:auto;display:flex;gap:8px}
    button{flex:1;padding:10px;border-radius:8px;border:0;font-weight:700;cursor:pointer}
    .buy{background:var(--accent);color:#111}
    .cart{background:#e6e6e6;color:#111}

    /* Cart drawer */
    .cart-drawer{position:fixed;right:16px;bottom:16px;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:320px;max-width:90%;overflow:hidden}
    .cart-header{padding:12px 14px;border-bottom:1px solid #eee;font-weight:700}
    .cart-body{max-height:360px;overflow:auto;padding:10px}
    .cart-item{display:flex;gap:10px;align-items:center;padding:8px 4px;border-bottom:1px dashed #f0f0f0}
    .cart-item img{width:56px;height:56px;object-fit:cover;border-radius:6px}
    .cart-footer{padding:12px;border-top:1px solid #eee;display:flex;flex-direction:column;gap:8px}
    .total{font-weight:800;font-size:18px}

    /* Responsive adjustments */
    @media (max-width:520px){.imgwrap{height:160px}.price{font-size:20px}}
  </style>
</head>
<body>
  <header>
    <div class="brand">A-cloK</div>
    <div style="margin-left:auto">Tienda online · Productos destacados</div>
  </header>

  <main class="container">
    <section style="margin-bottom:14px">
      <h2 style="margin:0 0 8px">Productos</h2>
      <p style="margin:0 0 12px;color:#444">Los productos se muestran con la imagen encima y el precio grande — estilo Amazon.</p>
    </section>

    <section class="grid" id="products"></section>
  </main>

  <!-- Cart drawer -->
  <div id="cartDrawer" class="cart-drawer" style="display:none">
    <div class="cart-header">Tu carrito</div>
    <div class="cart-body" id="cartBody"></div>
    <div class="cart-footer">
      <div class="total" id="cartTotal">Total: $0.00</div>
      <div id="paypalButtonsContainer"></div>
      <button onclick="checkoutFallback()" style="padding:10px;border-radius:8px;border:0;background:#111;color:#fff">Pagar con pago manual</button>
    </div>
  </div>

  <script>
    // --- Datos de ejemplo: reemplaza con tus productos ---
    const PRODUCTS = [
      {id:1, title:'Camiseta negra A-cloK - Unisex', price:14.99, image:'https://via.placeholder.com/400x400.png?text=Camiseta+Negra'},
      {id:2, title:'Buzo negro con tiras blancas', price:29.99, image:'https://via.placeholder.com/400x400.png?text=Buzo+Negro'},
      {id:3, title:'Pantalón deportivo A-cloK', price:24.5, image:'https://via.placeholder.com/400x400.png?text=Pantalon'}
    ];

    const cart = [];

    function formatPrice(n){return '$'+n.toFixed(2)}

    function renderProducts(){
      const wrap = document.getElementById('products');
      wrap.innerHTML='';
      PRODUCTS.forEach(p=>{
        const card = document.createElement('article'); card.className='card';
        card.innerHTML = `
          <div class="imgwrap"><img src="${p.image}" alt="${escapeHtml(p.title)}"></div>
          <div class="title">${escapeHtml(p.title)}</div>
          <div class="price">${formatPrice(p.price)}</div>
          <div class="meta">Envío rápido · Stock disponible</div>
          <div class="actions">
            <button class="buy" onclick="addToCart(${p.id})">Comprar</button>
            <button class="cart" onclick="addToCart(${p.id})">Añadir</button>
          </div>`;
        wrap.appendChild(card);
      })
    }

    function escapeHtml(s){return String(s).replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[c]))}

    function addToCart(id){
      const prod = PRODUCTS.find(x=>x.id===id);
      const existing = cart.find(x=>x.id===id);
      if(existing){ existing.qty++; } else { cart.push({id:prod.id,title:prod.title,price:prod.price,image:prod.image,qty:1}); }
      renderCart();
      showCart();
    }

    function renderCart(){
      const body = document.getElementById('cartBody');
      body.innerHTML='';
      let total = 0;
      cart.forEach(item=>{
        total += item.price * item.qty;
        const div = document.createElement('div'); div.className='cart-item';
        div.innerHTML = `
          <img src="${item.image}" alt="">
          <div style="flex:1">
            <div style="font-weight:700">${escapeHtml(item.title)}</div>
            <div style="font-size:13px;color:#666">${item.qty} × ${formatPrice(item.price)}</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:6px">
            <button style="padding:6px;border-radius:6px;border:0;background:#eee" onclick="changeQty(${item.id},1)">+</button>
            <button style="padding:6px;border-radius:6px;border:0;background:#eee" onclick="changeQty(${item.id},-1)">−</button>
          </div>`;
        body.appendChild(div);
      })
      document.getElementById('cartTotal').textContent = 'Total: ' + formatPrice(total);
    }

    function changeQty(id, delta){
      const it = cart.find(x=>x.id===id); if(!it) return;
      it.qty += delta; if(it.qty<=0) { const idx = cart.indexOf(it); cart.splice(idx,1);} renderCart();
      if(cart.length===0) hideCart();
    }

    function showCart(){ document.getElementById('cartDrawer').style.display='block' }
    function hideCart(){ document.getElementById('cartDrawer').style.display='none' }

    function checkoutFallback(){
      alert('Método de pago manual:\n1) Contacta por Whatsapp y envía el comprobante.\n2) Configura PayPal o Stripe siguiendo la guía incluida.');
    }

    // --- Inicializa ---
    renderProducts();

    // --- NOTA: Integración PayPal ---
    // Para habilitar pagos reales con PayPal:
    // 1) Crea una app en https://developer.paypal.com y obtén tu client-id.
    // 2) Reemplaza 'YOUR_PAYPAL_CLIENT_ID' en la etiqueta script de abajo.
    // 3) Configure server-side para validar pagos (recomendado). Aquí mostramos la integración cliente para pruebas.

  </script>

  <!-- PayPal SDK (reemplaza YOUR_PAYPAL_CLIENT_ID por tu ID real) -->
  <script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID&currency=USD" data-sdk-integration-source="button-factory"></script>
  <script>
    // Renderiza botón PayPal cuando PayPal SDK esté listo
    function renderPayPalButtons(){
      const container = document.getElementById('paypalButtonsContainer');
      if(!window.paypal) return;
      paypal.Buttons({
        style:{layout:'vertical', color:'gold', shape:'rect', label:'paypal'},
        createOrder: function(data, actions){
          // calcular total
          const total = cart.reduce((s,i)=>s + i.price * i.qty, 0).toFixed(2);
          if(total <= 0){ alert('El carrito está vacío'); return }
          return actions.order.create({purchase_units:[{amount:{value: total}}]});
        },
        onApprove: function(data, actions){
          return actions.order.capture().then(function(details){
            alert('Pago completado: ' + details.payer.name.given_name);
            cart.length = 0; renderCart(); hideCart();
          });
        }
      }).render('#paypalButtonsContainer');
    }

    // Intenta renderizar cuando SDK esté cargado
    window.addEventListener('load', ()=>{
      // si SDK ya cargó, renderiza
      if(window.paypal) renderPayPalButtons();
      // si se carga después
      const s = document.querySelector('script[src*="paypal.com/sdk/js"]');
      if(s) s.addEventListener('load', renderPayPalButtons);
    });
  </script>

</body>
</html>
